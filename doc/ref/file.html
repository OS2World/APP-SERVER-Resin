<!DOCTYPE html PUBLIC '-//W3C/DTD HTML 4.0 Frameset//EN' 'http://www.w3c.org/TR/REC-html40/frameset.dtd'>
<html>
  <head>
    <title>Files</title>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <link rel="STYLESHEET" href="../css/default.css" type="text/css">
  </head>
  <body bgcolor="white" background="../images/background.gif">
    <table border="0" summary="" width="100%" cellpadding="0" cellspacing="0">
      <tr valign="top">
        <td width="120">
          <table border="0" width="120" cellspacing="0" cellpadding="0">
            <tr>
              <td><img height="40" width="120" alt="caucho" src="../images/caucho.gif"></td>
            </tr><tr><td><a href="../index.html">Resin 1.1</a>
<tr><td><a href="faq.html">FAQ</a>
<tr><td><a href="index.html">Reference</a>
<tr><td><a href="../javadoc/index.html">JavaDoc</a>
<tr><td><a href="../examples/index.html">Demo</a>
<tr><td><a href="../java_tut/index.xtp">Java Tutorial</a>
<tr><td><hr>
<tr><td><a href="starting.html">Getting Started</a>
<tr><td><a href="config.html">Configuration</a>
<tr><td><a href="topics.html">Topics</a>
<tr><td><a href="jsp.html">JSP</a>
<tr><td><a href="xtp.html">XTP/XSL</a>
<tr><td><a href="javascript.html">JavaScript</a>
<tr><td><a href="jslib.html">JS Library</a>
<tr><td><hr>
<tr><td><a href="corelib.html">Core Library</a>
<tr><td><a href="filelib.html">File Library</a>
<tr><td><a href="servletlib.html">Servlet Library</a>
<tr><td><a href="dblib.html">Database Library</a>
<tr><td><a href="xmllib.html">XML Library</a>
<tr><td><hr>
<tr><td><a href="vfs.html">VFS</a>
<tr><td><em>File</em>
<tr><td><a href="read_stream.html">ReadStream</a>
<tr><td><a href="write_stream.html">WriteStream</a>
<tr><td><a href="input_stream.html">InputStream</a>
<tr><td><a href="output_stream.html">OutputStream</a>
</table>
        </td>
        <td width="30"><img height="1" width="30" alt="" src="../images/pixel.gif"></td>
        <td width="100%"><!-- top navigation -->
          <table border="0" summary="" width="100%" cellspacing="0" cellpadding="0">
            <tr class="toptitle">
              <td background="../images/hbleed.gif" width="90%" rowspan="2">
                <font size="+3" class="toptitle">
          &nbsp;Files</font>
              </td>
            </tr>
          </table><img height="20" width="1" alt="" src="../images/pixel.gif"><br>

The File object provides path and filesystem support: opening and removing
files, listing directories, and retrieving file attributes.  Paths are 
always URLs, using '/' to separate path components.  Resin takes
care of translating URLs into their system specific file names.

<p>
          <table border="1" width="100%" cellpadding="3" cellspacing="0">
            <tr class="section">
              <td colspan="2">
                <font size="+2">
                  <b>File Object</b>
                </font>
              </td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#File">File</a>(href)</td>
              <td>Returns a new file object.</td>
            </tr>
          </table>
          <p>
          <table border="1" width="100%" cellpadding="3" cellspacing="0">
            <tr class="section">
              <td colspan="2">
                <font size="+2">
                  <b>File instance properties</b>
                </font>
              </td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#lookup">lookup</a>(href)</td>
              <td>Returns a new file object.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#null">scheme</a></td>
              <td>Returns the scheme of the file.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#null">host</a></td>
              <td>Returns the host of the file.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#null">port</a></td>
              <td>Returns the port of the file.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#null">path</a></td>
              <td>Returns the path of the file.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#exists">exists</a>()</td>
              <td>
Returns true if the file refers to a file, directory or other object
in the filesystem.
</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#null">contentType</a></td>
              <td>
Contains the mime-type of the object.  Filesystems which are not
mime-aware return 'application/octet-stream'.
</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#isDirectory">isDirectory</a>()</td>
              <td>Returns true if the file refers to a directory.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#isFile">isFile</a>()</td>
              <td>
Returns true if the file refers to a file, i.e. something which can be
read by a stream.
</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#null">length</a></td>
              <td>Returns the length of the file in bytes.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#null">lastModified</a></td>
              <td>Returns the last modified time of the file.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#canRead">canRead</a>()</td>
              <td>
Tests if this file can be read.
</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#canWrite">canWrite</a>()</td>
              <td>Tests if this file can be written to.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#list">list</a>()</td>
              <td>
The contents of this directory or null if the file does not
refer to a directory.
</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#iterator">iterator</a>()</td>
              <td>Returns an iterator (jdk1.2 collection) of the contents of the
directory.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#mkdir">mkdir</a>()</td>
              <td>
Creates the directory named by the file.  The parent directory must
exist.
</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#mkdirs">mkdirs</a>()</td>
              <td>Creates the directory named by the file and any parent directories if
necessary.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#remove">remove</a>()</td>
              <td>Removes the directory or file named by the file.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#renameTo">renameTo</a>(newFile)</td>
              <td>
Renames the file or directory to the new file.  The parameter may
either be a file object or a string.
</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#createRoot">createRoot</a>()</td>
              <td>Creates a restricted File object.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#openRead">openRead</a>()</td>
              <td>
Opens a stream for reading.
</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#openWrite">openWrite</a>()</td>
              <td>
Opens a stream for writing.
</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#openAppend">openAppend</a>()</td>
              <td>
Opens a stream for writing.
</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#openReadWrite">openReadWrite</a>()</td>
              <td>Opens a stream for reading and writing.</td>
            </tr>
            <tr>
              <td width="40%" class="code"><a href="#writeln">writeln</a>(str [, str, ...])</td>
              <td>Convenience function writes the string to the file.</td>
            </tr>
          </table>

<a name="constructor"></a><p>
          <table border="0" width="100%" cellpadding="5" cellspacing="0">
            <tr class="section">
              <td>
                <font size="+2">
                  <b>File Object</b>
                </font>
              </td><td align=right>Resin 1.0</td>
</tr>
          </table>
          <p>

<a name="File_href_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">File(href)</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns a new file object.  The <span class="meta">href</span> is any URL.
<span class="meta">href</span> uses forward slashes to separate directories, even on
non-unix operating systems.

<p>
            <center>
              <table width="80%" class="egpad" cellspacing="0">
                <tr>
                  <td bgcolor="#ffeecc" width="50%" class="example">File("test.xml")</td>
                </tr>
                <td bgcolor="#ffccdd" class="result">The&nbsp;file&nbsp;test.xml&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;working&nbsp;directory.</td></tr>
<tr>
                  <td bgcolor="#ffeecc" width="50%" class="example">File("/home/ferg/foo.xml")</td>
                </tr>
                <td bgcolor="#ffccdd" class="result">A&nbsp;file&nbsp;in&nbsp;the&nbsp;user's&nbsp;home&nbsp;directory.</td></tr>
<tr>
                  <td bgcolor="#ffeecc" width="50%" class="example">File("..")</td>
                </tr>
                <td bgcolor="#ffccdd" class="result">The&nbsp;parent&nbsp;of&nbsp;the&nbsp;current&nbsp;directory.</td></tr>
<tr>
                  <td bgcolor="#ffeecc" width="50%" class="example">File("http://www.caucho.com")</td>
                </tr>
                <td bgcolor="#ffccdd" class="result">The&nbsp;Caucho&nbsp;Technology&nbsp;home&nbsp;page.</td></tr>
<tr>
                  <td bgcolor="#ffeecc" width="50%" class="example">File("mailto:user@localhost")</td>
                </tr>
                <td bgcolor="#ffccdd" class="result">Preparing&nbsp;to&nbsp;mail&nbsp;to&nbsp;a&nbsp;user.</td></tr>
<tr>
                  <td bgcolor="#ffeecc" width="50%" class="example">File("stderr:")</td>
                </tr>
                <td bgcolor="#ffccdd" class="result">The&nbsp;equivalent&nbsp;of&nbsp;Java's&nbsp;System.err&nbsp;user.</td></tr>
</table>
            </center>

</div>



<a name="instance"></a><p>
          <table border="0" width="100%" cellpadding="5" cellspacing="0">
            <tr class="section">
              <td>
                <font size="+2">
                  <b>File instance properties</b>
                </font>
              </td><td align=right>Resin 1.0</td>
</tr>
          </table>
          <p>

<a name="lookup_href_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">lookup(href)</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns a new file object.  <span class="meta">href</span> is a path relative
to the file.

<p>
            <center>
              <table width="80%" class="egpad" cellspacing="0">
                <tr>
                  <td bgcolor="#ffeecc" width="50%" class="example">File("foo").lookup("bar")</td>
                </tr>
                <td bgcolor="#ffccdd" class="result">File("foo/bar")</td></tr>
<tr>
                  <td bgcolor="#ffeecc" width="50%" class="example">File("http://www.caucho.com").lookup("about.html")</td>
                </tr>
                <td bgcolor="#ffccdd" class="result">File("http://www.caucho.com/about.html")</td></tr>
</table>
            </center>
</div>

<a name="scheme"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">scheme</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns the scheme of the file.

<p>
            <center>
              <table width="80%" class="egpad" cellspacing="0"><tr><td class='example' bgcolor='#ffccdd'>
File("http://www.caucho.com").scheme<br>

      </td></tr>
    <tr><td class='result' bgcolor='#ffeecc'>
http<br>

      </td></tr>
    </table>
            </center>
</div>

<a name="host"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">host</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns the host of the file.  If the scheme does not
support hosts, e.g. file:, it will return null.

<p>
            <center>
              <table width="80%" class="egpad" cellspacing="0"><tr><td class='example' bgcolor='#ffccdd'>
File("http://www.caucho.com").host<br>

      </td></tr>
    <tr><td class='result' bgcolor='#ffeecc'>
www.caucho.com<br>

      </td></tr>
    </table>
            </center>
</div>

<a name="port"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">port</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns the port of the file.  If the scheme does not
support ports, e.g. file:, it will return 0.

<p>
            <center>
              <table width="80%" class="egpad" cellspacing="0"><tr><td class='example' bgcolor='#ffccdd'>
File("http://www.caucho.com:8080").port<br>

      </td></tr>
    <tr><td class='result' bgcolor='#ffeecc'>
8080<br>

      </td></tr>
    </table>
            </center>
</div>

<a name="path"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">path</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns the path of the file.

<p>
            <center>
              <table width="80%" class="egpad" cellspacing="0"><tr><td class='example' bgcolor='#ffccdd'>
File("http://www.caucho.com/foo/bar.html").path<br>

      </td></tr>
    <tr><td class='result' bgcolor='#ffeecc'>
/foo/bar.html<br>

      </td></tr>
    </table>
            </center>
</div>

<a name="exists_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">exists()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns true if the file refers to a file, directory or other object
in the filesystem.
</div>

<a name="contentType"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">contentType</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Contains the mime-type of the object.  Filesystems which are not
mime-aware return 'application/octet-stream'.
</div>

<a name="isDirectory_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">isDirectory()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns true if the file refers to a directory.
</div>

<a name="isFile_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">isFile()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns true if the file refers to a file, i.e. something which can be
read by a stream.
</div>



<a name="length"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">length</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns the length of the file in bytes.
Returns 0 for non-files.
</div>

<a name="lastModified"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">lastModified</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns the last modified time of the file.  According to the JDK,
this may not correspond to system clock time.
</div>

<a name="canRead_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">canRead()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Tests if this file can be read.
</div>

<a name="canWrite_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">canWrite()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Tests if this file can be written to.

<p>Logging code can use this to write to a log only when enabled:
<p>
              <center>
                <table width="80%" class="egpad" cellspacing="0">
                  <tr>
                    <td bgcolor="#ffeecc" class="example">var&nbsp;log&nbsp;=&nbsp;File("log:/caucho/test")<br>
if&nbsp;(log.canWrite())<br>
&nbsp;&nbsp;log.println("logging")<br>
</td>
                  </tr>
                </table>
              </center>
</p>
          </div>

<a name="list_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">list()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
The contents of this directory or null if the file does not
refer to a directory.
</div>

<a name="iterator_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">iterator()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Returns an iterator (jdk1.2 collection) of the contents of the
directory.

<p>The following example writes the filenames of the current working
directory.
<p>
              <center>
                <table width="80%" class="egpad" cellspacing="0">
                  <tr>
                    <td bgcolor="#ffeecc" class="example">for&nbsp;(var&nbsp;file&nbsp;in&nbsp;File)&nbsp;{<br>
&nbsp;&nbsp;writeln(file);<br>
}<br>
</td>
                  </tr>
                </table>
              </center>
</p>
          </div>

<a name="mkdir_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">mkdir()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Creates the directory named by the file.  The parent directory must
exist.
</div>

<a name="mkdirs_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">mkdirs()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Creates the directory named by the file and any parent directories if
necessary.

<p>The following example creates a temp directory
<p>
              <center>
                <table width="80%" class="egpad" cellspacing="0">
                  <tr>
                    <td bgcolor="#ffeecc" class="example">File("/tmp/caucho/jsp").mkdirs()<br>
</td>
                  </tr>
                </table>
              </center>
</p>
          </div>

<a name="remove_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">remove()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Removes the directory or file named by the file.

<p>The following example removes all files in the current directory.
<p>
              <center>
                <table width="80%" class="egpad" cellspacing="0">
                  <tr>
                    <td bgcolor="#ffeecc" class="example">for&nbsp;(var&nbsp;file&nbsp;in&nbsp;File)<br>
&nbsp;&nbsp;File(file).remove()<br>
</td>
                  </tr>
                </table>
              </center>

</p>
          </div>

<a name="renameTo_newFile_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">renameTo(newFile)</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Renames the file or directory to the new file.  The parameter may
either be a file object or a string.
</div>

<a name="createRoot_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">createRoot()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Creates a restricted File object.  The restricted File only
has access to children of the new root object.  An absolute path will
refer to the created root, not the root of the parent filesystem.

<p>The following JSP example is safe, even though it returns a file
given a query string.  Normally, that's a big security mistake.

<p>
              <center>
                <table width="80%" class="egpad" cellspacing="0">
                  <tr>
                    <td bgcolor="#ffeecc" class="example">&lt;%@&nbsp;language=javascript&nbsp;%&gt;&lt;%&nbsp;<br>
response.contentType&nbsp;=&nbsp;"text/plain";<br>
<br>
//&nbsp;create&nbsp;virtual&nbsp;root<br>
var&nbsp;root&nbsp;=&nbsp;File.createRoot();<br>
<br>
//&nbsp;write&nbsp;the&nbsp;file&nbsp;in&nbsp;the&nbsp;queryString<br>
out.writeFile(root(request.queryString))&nbsp;<br>
%&gt;<br>
</td>
                  </tr>
                </table>
              </center>
</p>
          </div>

<a name="openRead_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">openRead()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Opens a stream for reading.
</div>

<a name="openWrite_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">openWrite()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Opens a stream for writing.
</div>

<a name="openAppend_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">openAppend()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Opens a stream for writing.
</div>

<a name="openReadWrite_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">openReadWrite()</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Opens a stream for reading and writing.

<p>Streams open for read/write have all the methods of both 
<a href="read_stream.html">read streams</a> and <a href="write_stream.html">write streams</a>  In addition, they ensure
that writes are flushed before reads.

<p>
            <center>
              <table width="80%" class="egpad" cellspacing="0"><tr><td class='example' bgcolor='#ffccdd'>
var&nbsp;s&nbsp;=&nbsp;File("tcp://localhost:80").openReadWrite();<br>
s.writeln("GET&nbsp;/index.html")<br>
<br>
while&nbsp;(line&nbsp;=&nbsp;s.readln())&nbsp;{<br>
&nbsp;&nbsp;writeln(line);<br>
}<br>

      </td></tr>
    <tr><td class='result' bgcolor='#ffeecc'>
&lt;html>&lt;body><br>
Welcome&nbsp;to&nbsp;our&nbsp;home&nbsp;page.<br>
&lt;/body>&lt;/html><br>

      </td></tr>
    </table>
            </center>

</div>



<a name="writeln_str_str_"></a><p>
          <table border="0" width="100%" cellspacing="0">
            <tr>
              <td>
                <h3 class="code">writeln(str [, str, ...])</h3>
              </td>
            </tr>
          </table>
          <div class="desc">
Convenience function writes the string to the file.

<p>The following example sends a mail message containing the single
line "subscribe".

<p>
              <center>
                <table width="80%" class="egpad" cellspacing="0">
                  <tr>
                    <td bgcolor="#ffeecc" class="example">File("mailto:user@localhost").writeln("subscribe");<br>
</td>
                  </tr>
                </table>
              </center>
</p>
          </div>


<hr><table border=0 width='100%'><tr>
<td>
<a href='vfs.html'>VFS</a>
<td align=center width='*'>&nbsp;
</td><td align=right>
<a href='read_stream.html'>ReadStream</a>
</table>
<center>
            <em>Copyright &copy; 1998-2000 Caucho Technology.  All rights reserved.</em>
          </center>
          <font size="-1">Last modified: Mon, 03 Apr 2000 11:20:13 -0700 (PDT)</font>
        </td>
      </tr>
    </table>
  </body>
</html>
