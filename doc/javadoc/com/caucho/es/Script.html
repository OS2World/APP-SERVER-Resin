<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Mon Oct 02 17:35:32 PDT 2000 -->
<TITLE>
: Class  Script
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/caucho/es/Resin.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/caucho/es/ScriptClosure.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Script.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.caucho.es</FONT>
<BR>
Class  Script</H2>
<PRE>
java.lang.Object
  |
  +--<B>com.caucho.es.Script</B>
</PRE>
<HR>
<DL>
<DT>public abstract class <B>Script</B><DT>extends java.lang.Object</DL>

<P>
The Script object represents a compiled JavaScript.  Executing it
 is thread safe.  To create a Script, use the Resin class to parse
 a file.

 <p>Java programs set JavaScript Global properties by adding objects to
 a HashMap.  Typically you will at least assign the 'File' and 
 the 'out' objects.  The running script will 
 see these objects as properties of the Global object.  If you set the
 'out' object, the script can use the bare bones 'writeln("foo")' to
 write to 'out'.

 <pre><code>
 HashMap map = new HashMap();
 map.put("File", Pwd.lookup());
 map.put("out", System.out);
 map.put("myObject", myObject);

 script.execute(map, null);
 </code></pre>

 <p>You can also make any Java object be the global prototype.
 Essentially, the effect is similar to the HashMap technique, but
 it's a little simpler.

 <p>Scripts are thread-safe.  Multiple script instances can
 safely execute in separate threads.  Script.execute creates the
 entire JavaScript global object hierarchy fresh for each execution.
 So one Script execution cannot interfere with another, even by doing
 evil things like modifying the Object prototype.

 <p>Of course, wrapped Java objects shared by script invocations
 must still be synchronized.
<P>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->


<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../com/caucho/es/Script.html#Script()">Script</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/caucho/es/Script.html#_init(com.caucho.es.Global, com.caucho.es.ESObject)">_init</A></B>(<A HREF="../../../com/caucho/es/Global.html">Global</A>&nbsp;resin,
      <A HREF="../../../com/caucho/es/ESObject.html">ESObject</A>&nbsp;global)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>abstract &nbsp;<A HREF="../../../com/caucho/es/ESBase.html">ESBase</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/caucho/es/Script.html#call(int, com.caucho.es.Call, int)">call</A></B>(int&nbsp;n,
     <A HREF="../../../com/caucho/es/Call.html">Call</A>&nbsp;call,
     int&nbsp;length)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/caucho/es/Script.html#execute(java.util.HashMap, java.lang.Object)">execute</A></B>(java.util.HashMap&nbsp;properties,
        java.lang.Object&nbsp;proto)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Execute the script; the main useful entry.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../com/caucho/es/ScriptClosure.html">ScriptClosure</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/caucho/es/Script.html#executeClosure(java.util.HashMap, java.lang.Object)">executeClosure</A></B>(java.util.HashMap&nbsp;properties,
               java.lang.Object&nbsp;proto)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Execute the program, returning a closure of the global state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/caucho/es/Script.html#export(com.caucho.es.ESObject, com.caucho.es.ESObject)">export</A></B>(<A HREF="../../../com/caucho/es/ESObject.html">ESObject</A>&nbsp;dest,
       <A HREF="../../../com/caucho/es/ESObject.html">ESObject</A>&nbsp;src)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/caucho/es/Script.html#getLastModified()">getLastModified</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the lastModified time of the script.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;com.caucho.java.LineMap</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/caucho/es/Script.html#getLineMap()">getLineMap</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/caucho/es/Script.html#setClassDir(com.caucho.vfs.Path)">setClassDir</A></B>(<A HREF="../../../com/caucho/vfs/Path.html">Path</A>&nbsp;classDir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../com/caucho/es/Script.html#setScriptPath(com.caucho.vfs.Path[])">setScriptPath</A></B>(<A HREF="../../../com/caucho/vfs/Path.html">Path</A>[]&nbsp;scriptPath)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->


<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="Script()"><!-- --></A><H3>
Script</H3>
<PRE>
public <B>Script</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="getLastModified()"><!-- --></A><H3>
getLastModified</H3>
<PRE>
public long <B>getLastModified</B>()</PRE>
<DL>
<DD>Returns the lastModified time of the script.  The last modified
 time is the maximum of all imported script modified times.

 <p>getLastModified is vital for dynamic applications like JSP
 which need to reload the script when it changes.</DL>
<HR>

<A NAME="setScriptPath(com.caucho.vfs.Path[])"><!-- --></A><H3>
setScriptPath</H3>
<PRE>
public void <B>setScriptPath</B>(<A HREF="../../../com/caucho/vfs/Path.html">Path</A>[]&nbsp;scriptPath)</PRE>
<DL>
</DL>
<HR>

<A NAME="setClassDir(com.caucho.vfs.Path)"><!-- --></A><H3>
setClassDir</H3>
<PRE>
public void <B>setClassDir</B>(<A HREF="../../../com/caucho/vfs/Path.html">Path</A>&nbsp;classDir)</PRE>
<DL>
</DL>
<HR>

<A NAME="getLineMap()"><!-- --></A><H3>
getLineMap</H3>
<PRE>
public com.caucho.java.LineMap <B>getLineMap</B>()</PRE>
<DL>
</DL>
<HR>

<A NAME="execute(java.util.HashMap, java.lang.Object)"><!-- --></A><H3>
execute</H3>
<PRE>
public java.lang.String <B>execute</B>(java.util.HashMap&nbsp;properties,
                                java.lang.Object&nbsp;proto)
                         throws java.lang.Exception</PRE>
<DL>
<DD>Execute the script; the main useful entry.

 <p>Calling programs can make Java objects available as properties
 of the global object by creating a property hash map or assigning
 a global prototype.

 <pre><code>
 HashMap map = new HashMap();
 map.put("File", Pwd.lookup());
 map.put("out", System.out);
 map.put("myObject", myObject);
 script.execute(map, null);
 </code></pre><DD><DL>
<DT><B>Parameters:</B><DD><CODE>properties</CODE> - A hash map of global properties.<DD><CODE>proto</CODE> - Global prototype.  Gives the script direct access to
 the java methods of the object.<DD><CODE>loader</CODE> - Class loader.<DT><B>Returns:</B><DD>String value of the last expression, like the JavaScript eval.
 This is useful only for testing.</DL>
</DD>
</DL>
<HR>

<A NAME="executeClosure(java.util.HashMap, java.lang.Object)"><!-- --></A><H3>
executeClosure</H3>
<PRE>
public <A HREF="../../../com/caucho/es/ScriptClosure.html">ScriptClosure</A> <B>executeClosure</B>(java.util.HashMap&nbsp;properties,
                                    java.lang.Object&nbsp;proto)
                             throws <A HREF="../../../com/caucho/es/ESException.html">ESException</A></PRE>
<DL>
<DD>Execute the program, returning a closure of the global state.

 <p>Later routines can then call into the closure.<DD><DL>
<DT><B>Parameters:</B><DD><CODE>properties</CODE> - A hash map of global properties.<DD><CODE>proto</CODE> - Global prototype.  Gives the script direct access to
 the java methods of the object.</DL>
</DD>
</DL>
<HR>

<A NAME="call(int, com.caucho.es.Call, int)"><!-- --></A><H3>
call</H3>
<PRE>
public abstract <A HREF="../../../com/caucho/es/ESBase.html">ESBase</A> <B>call</B>(int&nbsp;n,
                            <A HREF="../../../com/caucho/es/Call.html">Call</A>&nbsp;call,
                            int&nbsp;length)
                     throws java.lang.Exception</PRE>
<DL>
</DL>
<HR>

<A NAME="_init(com.caucho.es.Global, com.caucho.es.ESObject)"><!-- --></A><H3>
_init</H3>
<PRE>
public void <B>_init</B>(<A HREF="../../../com/caucho/es/Global.html">Global</A>&nbsp;resin,
                  <A HREF="../../../com/caucho/es/ESObject.html">ESObject</A>&nbsp;global)
           throws java.lang.Exception</PRE>
<DL>
</DL>
<HR>

<A NAME="export(com.caucho.es.ESObject, com.caucho.es.ESObject)"><!-- --></A><H3>
export</H3>
<PRE>
public void <B>export</B>(<A HREF="../../../com/caucho/es/ESObject.html">ESObject</A>&nbsp;dest,
                   <A HREF="../../../com/caucho/es/ESObject.html">ESObject</A>&nbsp;src)
            throws java.lang.Exception</PRE>
<DL>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../com/caucho/es/Resin.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../com/caucho/es/ScriptClosure.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="Script.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>

</BODY>
</HTML>
